# ============================================
# CHURCH CRYPTO DONATIONS PLATFORM
# Environment Variables Template
# ============================================
#
# SECURITY WARNING:
# - Never commit .env.local to version control
# - Keep production secrets separate from development
# - Rotate API keys regularly
# - Use different keys for development, staging, and production

# ============================================
# APPLICATION SETTINGS
# ============================================

# Environment: development | staging | production
NODE_ENV=development

# Public URL of your application
# Used for: webhooks, QR codes, email links
NEXT_PUBLIC_APP_URL=http://localhost:3000

# ============================================
# DATABASE (PostgreSQL via Supabase)
# ============================================

# Connection string for Prisma (uses connection pooling)
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?pgbouncer=true
DATABASE_URL="postgresql://postgres:password@db.xxxxxxxxxxxxxxxx.supabase.co:6543/postgres?pgbouncer=true"

# Direct connection for migrations (bypasses pooling)
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
DIRECT_URL="postgresql://postgres:password@db.xxxxxxxxxxxxxxxx.supabase.co:5432/postgres"

# ============================================
# SUPABASE (Auth + Database + Storage)
# ============================================

# Get these from: https://app.supabase.com/project/_/settings/api
NEXT_PUBLIC_SUPABASE_URL=https://xxxxxxxxxxxxxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# Service role key (server-side only, never expose to client)
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# ============================================
# REDIS (Upstash for caching and rate limiting)
# ============================================

# For local development (optional, uses in-memory cache if not set)
REDIS_URL=redis://localhost:6379

# Upstash Redis REST API (production)
# Get from: https://console.upstash.com
UPSTASH_REDIS_REST_URL=https://xxxxxxxx.upstash.io
UPSTASH_REDIS_REST_TOKEN=your-upstash-token-here

# ============================================
# BLOCKCHAIN API PROVIDERS
# ============================================

# Alchemy API (Ethereum & USDC monitoring)
# Get from: https://dashboard.alchemy.com
# Used for: real-time transaction webhooks, balance queries
ALCHEMY_API_KEY=your-alchemy-api-key-here
ALCHEMY_WEBHOOK_SIGNING_KEY=your-webhook-signing-key-here

# Blockchair API (Bitcoin monitoring)
# Get from: https://blockchair.com/api
# Used for: Bitcoin transaction polling, balance queries
BLOCKCHAIR_API_KEY=your-blockchair-api-key-here

# XRP Ledger WebSocket URL
# Public nodes: wss://xrplcluster.com/ or wss://s1.ripple.com/
XRPL_WEBSOCKET_URL=wss://xrplcluster.com/

# ============================================
# MOONPAY (On-ramp, Off-ramp, Swap)
# ============================================

# Get from: https://www.moonpay.com/dashboard
# MoonPay provides a single provider for all payment operations

# API Key (server-side)
MOONPAY_API_KEY=your-moonpay-api-key-here

# Secret Key (for webhook verification)
MOONPAY_SECRET_KEY=your-moonpay-secret-key-here

# Publishable Key (client-side, safe to expose)
NEXT_PUBLIC_MOONPAY_PUBLISHABLE_KEY=your-moonpay-publishable-key-here

# Webhook URL (set in MoonPay dashboard)
# Example: https://your-domain.com/api/moonpay/webhook
MOONPAY_WEBHOOK_URL=${NEXT_PUBLIC_APP_URL}/api/moonpay/webhook

# ============================================
# STRIPE (Subscription Billing)
# ============================================

# Get from: https://dashboard.stripe.com/apikeys

# Secret Key (server-side)
STRIPE_SECRET_KEY=sk_test_xxxxxxxxxxxxxxxxxxxx

# Publishable Key (client-side, safe to expose)
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_xxxxxxxxxxxxxxxxxxxx

# Webhook Secret (for webhook signature verification)
# Get from: https://dashboard.stripe.com/webhooks
STRIPE_WEBHOOK_SECRET=whsec_xxxxxxxxxxxxxxxxxxxx

# Subscription Price IDs (created in Stripe dashboard)
STRIPE_PRICE_BASIC=price_xxxxxxxxxxxx
STRIPE_PRICE_PRO=price_xxxxxxxxxxxx
STRIPE_PRICE_ENTERPRISE=price_xxxxxxxxxxxx

# ============================================
# PRICE FEEDS (Real-time USD Conversion)
# ============================================

# CoinGecko API (primary price source)
# Free tier: 50 calls/minute
# Get from: https://www.coingecko.com/en/api
COINGECKO_API_KEY=your-coingecko-api-key-here

# CryptoCompare API (backup price source)
# Get from: https://min-api.cryptocompare.com
CRYPTOCOMPARE_API_KEY=your-cryptocompare-api-key-here

# ============================================
# MONITORING & ERROR TRACKING
# ============================================

# Sentry (error tracking and performance monitoring)
# Get from: https://sentry.io
SENTRY_DSN=https://xxxxxxxxxxxxxxxx@xxxxxx.ingest.sentry.io/xxxxxx
SENTRY_AUTH_TOKEN=your-sentry-auth-token-here
SENTRY_ORG=your-org-slug
SENTRY_PROJECT=your-project-slug

# Sentry environment name
SENTRY_ENVIRONMENT=development

# ============================================
# ENCRYPTION & SECURITY
# ============================================

# Encryption key for sensitive data at rest
# Generate with: openssl rand -hex 32
# IMPORTANT: Keep this secret and never change it (or you'll lose encrypted data)
ENCRYPTION_KEY=generate-a-secure-random-key-here

# NextAuth Secret (for session encryption)
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET=your-nextauth-secret-here
NEXTAUTH_URL=${NEXT_PUBLIC_APP_URL}

# ============================================
# EMAIL (Transactional Emails)
# ============================================

# SendGrid (for donation receipts, user invitations)
# Get from: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=your-sendgrid-api-key-here

# From email address (must be verified in SendGrid)
SMTP_FROM=donations@yourchurch.app
SMTP_FROM_NAME="Church Crypto Donations"

# ============================================
# FEATURE FLAGS (Optional)
# ============================================

# Enable/disable features during development
FEATURE_MOONPAY_ENABLED=true
FEATURE_STRIPE_ENABLED=true
FEATURE_MFA_ENABLED=true
FEATURE_AUDIT_LOGS_ENABLED=true

# ============================================
# DEVELOPMENT & TESTING
# ============================================

# Skip email verification in development (true/false)
SKIP_EMAIL_VERIFICATION=false

# Mock blockchain transactions for testing (true/false)
MOCK_BLOCKCHAIN_TRANSACTIONS=false

# Verbose logging for debugging (true/false)
DEBUG_MODE=false
